{{/* Slack templates for Alertmanager */}}

{{ define "slack.title" -}}
{{- if eq .Status "firing" -}}ðŸš¨ FIRING{{- else -}}âœ… RESOLVED{{- end -}}
 | {{- with (index .CommonLabels "severity") -}}{{ . | toUpper }}{{- else -}}UNKNOWN{{- end -}}
 | {{- with (index .CommonLabels "alertname") -}}{{ . }}{{- else -}}Alert{{- end -}}
{{- end }}

{{ define "slack.text" -}}
{{- $summary := (index .CommonAnnotations "summary") -}}
{{- $description := (index .CommonAnnotations "description") -}}
{{- $runbook := (index .CommonAnnotations "runbook_url") -}}

*Summary:*
{{- if $summary -}}
{{ $summary }}
{{- else -}}
(no summary annotation)
{{- end -}}

{{- if $description }}

*Description:*
{{ $description }}
{{- end }}

*Key labels:*
{{- with (index .CommonLabels "namespace") }}
â€¢ *namespace:* `{{ . }}`
{{- end }}
{{- with (index .CommonLabels "job") }}
â€¢ *job:* `{{ . }}`
{{- end }}
{{- with (index .CommonLabels "instance") }}
â€¢ *instance:* `{{ . }}`
{{- end }}
{{- with (index .CommonLabels "pod") }}
â€¢ *pod:* `{{ . }}`
{{- end }}
{{- with (index .CommonLabels "service") }}
â€¢ *service:* `{{ . }}`
{{- end }}

*Links:*
{{- if $runbook }}
â€¢ ðŸ“˜ <{{ $runbook }}|Runbook>
{{- end }}
{{- if .ExternalURL }}
â€¢ ðŸ”— <{{ .ExternalURL }}|Alertmanager>
{{- end }}
{{- end }}
