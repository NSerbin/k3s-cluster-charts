{{/* =========================================================
   Slack templates for Alertmanager
   - slack.title
   - slack.text
   ========================================================= */}}

{{/* ---------- TITLE ---------- */}}
{{- define "slack.title" -}}
{{ if eq .Status "firing" }}ğŸ”¥{{ else }}âœ…{{ end }} {{ .CommonLabels.alertname }} {{ if eq .Status "firing" }}{{ .CommonLabels.severity | toUpper }}{{ else }}RESOLVED{{ end }}
{{- end -}}

{{/* ---------- BODY ---------- */}}
{{- define "slack.text" -}}

{{/* ----- SUMMARY ----- */}}
*ğŸ“ Summary*
{{- if .CommonAnnotations.summary }}
{{ .CommonAnnotations.summary }}
{{- else }}
_(no summary annotation)_
{{- end }}

{{/* ----- DESCRIPTION ----- */}}
{{- if .CommonAnnotations.description }}

*ğŸ“„ Description*
{{ .CommonAnnotations.description }}
{{- end }}

{{/* ----- CONTEXT (KEY LABELS) ----- */}}
*ğŸ“Œ Context*
{{- with .CommonLabels.namespace }}
â€¢ *Namespace:* `{{ . }}`
{{- end }}
{{- with .CommonLabels.pod }}
â€¢ *Pod:* `{{ . }}`
{{- end }}
{{- with .CommonLabels.container }}
â€¢ *Container:* `{{ . }}`
{{- end }}
{{- with .CommonLabels.node }}
â€¢ *Node:* `{{ . }}`
{{- end }}
{{- with .CommonLabels.job }}
â€¢ *Job:* `{{ . }}`
{{- end }}

{{/* ----- LINKS ----- */}}
*ğŸ”— Links*
{{- if .CommonAnnotations.runbook_url }}
â€¢ ğŸ“˜ <{{ .CommonAnnotations.runbook_url }}|Runbook>
{{- end }}
{{- if .ExternalURL }}
â€¢ ğŸ” <{{ .ExternalURL }}|Alertmanager>
{{- end }}

{{- end }}
